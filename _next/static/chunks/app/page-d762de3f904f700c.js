(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{6302:(e,t,r)=>{Promise.resolve().then(r.bind(r,7594))},7594:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i});var s=r(5155),l=r(2115);let a=()=>{let[e,t]=(0,l.useState)([]),[r,a]=(0,l.useState)(null);return(0,l.useEffect)(()=>()=>{r&&r.close()},[r]),(0,s.jsxs)("div",{children:[(0,s.jsx)("button",{onClick:()=>{let e=new EventSource("/api/sse");e.onmessage=e=>{let r=JSON.parse(e.data);t(e=>[...e,r])},e.onerror=()=>{e.close()},a(e)},children:"SSE 메시지 스트림 시작"}),(0,s.jsx)("div",{children:e.map((e,t)=>(0,s.jsx)("span",{children:e.text},t))})]})},n=e=>{let{setInputText:t}=e,[r,a]=(0,l.useState)(!1),[n,i]=(0,l.useState)(null);(0,l.useEffect)(()=>{{let e=window.SpeechRecognition||window.webkitSpeechRecognition;e?i(new e):alert("Web Speech API를 지원하지 않는 브라우저입니다.")}},[]);let o=()=>{if(!n){alert("Web Speech API를 지원하지 않는 브라우저입니다.");return}n.lang="ko-KR",n.interimResults=!0,n.maxAlternatives=1,n.onstart=()=>{a(!0)},n.onresult=e=>{t(e.results[e.results.length-1][0].transcript)},n.onerror=e=>{alert(e.error)},n.onend=()=>{a(!1)},n.start()},c=()=>{n&&(n.stop(),a(!1))};return(0,s.jsxs)("div",{className:"flex items-center gap-[20px]",children:[(0,s.jsx)("div",{children:"음성 인식 : "}),(0,s.jsx)("button",{onClick:()=>{o()},children:r?"듣는 중...":"시작"}),r&&(0,s.jsx)("button",{onClick:()=>{c()},children:"종료"})]})},i=()=>{let[e,t]=(0,l.useState)(""),[r,i]=(0,l.useState)(!1),[o,c]=(0,l.useState)(""),d=e=>{if(!e.type.startsWith("image/")){alert("이미지 파일만 업로드할 수 있습니다.");return}let t=new FileReader;t.onload=()=>{c(String(t.result))},t.readAsDataURL(e)};return(0,s.jsxs)("div",{className:"flex flex-col w-screen h-[2000px] max-w-[800px] mx-auto pt-[60px] relative",children:[(0,s.jsxs)("div",{className:"sticky top-0 bg-white border-2 w-full mx-auto bg-gray-200 border-2 flex flex-col items-center justify-center transition-all ".concat(r?"bg-blue-200 border-blue-500 border-dashed":""),onDragOver:e=>{e.preventDefault()},onDragEnter:()=>{i(!0)},onDragLeave:e=>{e.relatedTarget&&!e.currentTarget.contains(e.relatedTarget)&&i(!1)},onDrop:e=>{e.preventDefault();let t=e.dataTransfer.files[0];t&&(d(t),i(!1))},children:[(0,s.jsxs)("div",{className:"relative w-full",children:[(0,s.jsx)("textarea",{className:"w-full resize-none pr-[48px] focus:outline-none focus:border-transparent bg-red-100 h-[70px] ".concat(r&&"pointer-events-none"),value:e,onChange:e=>t(e.target.value)}),(0,s.jsxs)("div",{className:"absolute right-0 top-1/2 transform -translate-y-1/2 flex items-center gap-[10px]",children:[e&&(0,s.jsx)("button",{className:"",onClick:()=>t(""),children:"지우기"}),(0,s.jsx)("button",{className:"",children:"검색"})]})]}),(0,s.jsxs)("div",{className:"flex gap-[10px] w-full",children:[(0,s.jsx)("input",{type:"file",id:"file-upload",onChange:e=>{var t;let r=null===(t=e.target.files)||void 0===t?void 0:t[0];r&&d(r)},className:"hidden"}),(0,s.jsx)("label",{htmlFor:"file-upload",className:"cursor-pointer",children:"파일"}),(0,s.jsx)("div",{children:"|"}),(0,s.jsx)(n,{setInputText:t})]}),o&&(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("img",{src:o,alt:"upload image",className:"w-full h-auto object-contain rounded-[20px]"}),(0,s.jsx)("div",{className:"absolute top-0 right-0 cursor-pointer bg-green-200",onClick:()=>{c("")},children:"닫기"})]})]}),(0,s.jsx)("main",{className:"flex flex-grow bg-green-50 flex-col justify-between",children:(0,s.jsx)(a,{})}),(0,s.jsx)("footer",{className:"bg-blue-50 sticky bottom-0 border-2 h-[50px]",children:"footer"})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[441,517,358],()=>t(6302)),_N_E=e.O()}]);